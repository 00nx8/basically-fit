import{u as We,Q as Ge}from"./QInput-D86SqAom.js";import{q as Xe,c as ee,a as y,h as m,b as te,a1 as Ee,j as Je,g as ne,r as q,n as O,a2 as Ze,Z as Ye,o as me,a3 as Ve,k as Oe,a4 as ze,a5 as et,d as pe,Q as Le,U as z,a6 as He,s as $e,a7 as ye,a8 as tt,a9 as be,aa as nt,v as ot,G as it,ab as lt,V as we,L as I,S as at,K as Z,a0 as ke,P as rt,H as st,I as ce,W as Ce,X as ut,J as de,T as fe,ac as ct,ad as Y}from"./index-D7LHrqkT.js";import{u as dt,v as ft,d as Se,e as Fe,a as ht,f as gt,g as mt,h as pt,i as vt,c as yt,j as bt,p as xe,k as wt,r as qe,l as kt,s as Ct,m as Ne,b as St,Q as xt}from"./use-id-LPlOJcqh.js";import{u as Re,a as _e}from"./use-dark-hVWXkztj.js";import{s as qt,a as Tt,b as Bt,g as Pt}from"./scroll-BuuKNtMi.js";import{a as Te,Q as Et}from"./QItem-Y8GWypqu.js";import{E as V}from"./models-pZXpzrEA.js";import{e as Ot}from"./state-DRLpWN3Z.js";function Ae(e,t){if(t&&e===t)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,a=i.display;return a==="block"||a==="table"?e:Ae(e.parentNode)}function he(e,t,n){return!e||e===document.body?!1:n===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function De(e,t,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),t.count===0)n.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(n.setEnd(e,t.count),t.count=0);else for(let i=0;t.count!==0&&i<e.childNodes.length;i++)n=De(e.childNodes[i],t,n);return n}const zt=/^https?:\/\//;class Lt{constructor(t,n){this.el=t,this.eVm=n,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(he(t.anchorNode,this.el,!0)&&he(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const n=t.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Ae(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const n=document.createRange(),i=document.getSelection();t!==null?(n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset),i.removeAllRanges(),i.addRange(n)):(i.selectAllChildren(this.el),i.collapseToEnd())}savePosition(){let t=-1,n;const i=document.getSelection(),a=this.el.parentNode;if(i.focusNode&&he(i.focusNode,a))for(n=i.focusNode,t=i.focusOffset;n&&n!==a;)n!==this.el&&n.previousSibling?(n=n.previousSibling,t+=n.textContent.length):n=n.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const n=window.getSelection(),i=De(this.el,{count:this.savedPos});i&&(i.collapse(!1),n.removeAllRanges(),n.addRange(i))}}hasParent(t,n){const i=n?this.parent:this.blockParent;return i!==null?i.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,n,i=this.parent){return i===null?!1:t.includes(i.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(t,n,i.parentNode):!1}is(t,n){if(this.selection===null)return!1;switch(t){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===n;case"fontName":const i=document.queryCommandValue(t);return i===`"${n}"`||i===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const a=document.queryCommandState(t);return n!==void 0?a===n:a}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,n,i=Xe){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(t,n)&&(t="outdent",n=null),n==="PRE"&&this.is(t,"PRE")&&(n="P");else if(t==="print"){i();const a=window.open();a.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),a.print(),a.close();return}else if(t==="link"){const a=this.getParentAttribute("href");if(a===null){const r=this.selectWord(this.selection),u=r?r.toString():"";if(!u.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=zt.test(u)?u:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(r.getRangeAt(0))}else this.eVm.editLinkUrl.value=a,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),i();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),i();return}document.execCommand(t,!1,n),i()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const n=document.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset);const i=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const a=t.focusNode,r=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",i[0],"character"),t.modify("move",i[1],"word"),t.extend(a,r),t.modify("extend",i[1],"character"),t.modify("extend",i[0],"word"),t}}const Ht=ee({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const n=y(()=>{const i=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${i.length!==0?" "+i:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>m("div",{class:n.value},te(t.default))}}),H=[];let _;function $t(e){_=e.keyCode===27}function Ft(){_===!0&&(_=!1)}function Nt(e){_===!0&&(_=!1,Je(e,27)===!0&&H[H.length-1](e))}function je(e){window[e]("keydown",$t),window[e]("blur",Ft),window[e]("keyup",Nt),_=!1}function Rt(e){Ee.is.desktop===!0&&(H.push(e),H.length===1&&je("addEventListener"))}function Be(e){const t=H.indexOf(e);t!==-1&&(H.splice(t,1),H.length===0&&je("removeEventListener"))}const $=[];function Ie(e){$[$.length-1](e)}function _t(e){Ee.is.desktop===!0&&($.push(e),$.length===1&&document.body.addEventListener("focusin",Ie))}function At(e){const t=$.indexOf(e);t!==-1&&($.splice(t,1),$.length===0&&document.body.removeEventListener("focusin",Ie))}const Dt=ee({name:"QMenu",inheritAttrs:!1,props:{...gt,...ht,...Re,...Fe,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:Se},self:{type:String,validator:Se},offset:{type:Array,validator:ft},scrollTarget:qt,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...dt,"click","escapeKey"],setup(e,{slots:t,emit:n,attrs:i}){let a=null,r,u,f;const w=ne(),{proxy:v}=w,{$q:s}=v,p=q(null),b=q(!1),d=y(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),k=_e(e,s),{registerTick:x,removeTick:E}=Tt(),{registerTimeout:B}=Bt(),{transitionProps:F,transitionStyle:P}=mt(e),{localScrollTarget:h,changeScrollEvent:C,unconfigureScrollTarget:oe}=pt(e,T),{anchorEl:L,canShow:ie}=vt({showing:b}),{hide:Q}=yt({showing:b,canShow:ie,handleShow:X,handleHide:D,hideOnRouteChange:d,processOnMount:!0}),{showPortal:U,hidePortal:K,renderPortal:le}=bt(w,p,g,"menu"),A={anchorEl:L,innerRef:p,onClickOutside(c){if(e.persistent!==!0&&b.value===!0)return Q(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&Oe(c),!0}},W=y(()=>xe(e.anchor||(e.cover===!0?"center middle":"bottom start"),s.lang.rtl)),ae=y(()=>e.cover===!0?W.value:xe(e.self||"top start",s.lang.rtl)),re=y(()=>(e.square===!0?" q-menu--square":"")+(k.value===!0?" q-menu--dark q-dark":"")),se=y(()=>e.autoClose===!0?{onClick:j}:{}),G=y(()=>b.value===!0&&e.persistent!==!0);O(G,c=>{c===!0?(Rt(o),wt(A)):(Be(o),qe(A))});function N(){Ne(()=>{let c=p.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function X(c){if(a=e.noRefocus===!1?document.activeElement:null,_t(J),U(),T(),r=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const S=Ze(c);if(S.left!==void 0){const{top:ue,left:Ke}=L.value.getBoundingClientRect();r={left:S.left-Ke,top:S.top-ue}}}u===void 0&&(u=O(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,l)),e.noFocus!==!0&&document.activeElement.blur(),x(()=>{l(),e.noFocus!==!0&&N()}),B(()=>{s.platform.is.ios===!0&&(f=e.autoClose,p.value.click()),l(),U(!0),n("show",c)},e.transitionDuration)}function D(c){E(),K(),R(!0),a!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?a.closest('[tabindex]:not([tabindex^="-"])'):void 0)||a).focus(),a=null),B(()=>{K(!0),n("hide",c)},e.transitionDuration)}function R(c){r=void 0,u!==void 0&&(u(),u=void 0),(c===!0||b.value===!0)&&(At(J),oe(),qe(A),Be(o)),c!==!0&&(a=null)}function T(){(L.value!==null||e.scrollTarget!==void 0)&&(h.value=Pt(L.value,e.scrollTarget),C(h.value,l))}function j(c){f!==!0?(kt(v,c),n("click",c)):f=!1}function J(c){G.value===!0&&e.noFocus!==!0&&Ve(p.value,c.target)!==!0&&N()}function o(c){n("escapeKey"),Q(c)}function l(){Ct({targetEl:p.value,offset:e.offset,anchorEl:L.value,anchorOrigin:W.value,selfOrigin:ae.value,absoluteOffset:r,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function g(){return m(Ye,F.value,()=>b.value===!0?m("div",{role:"menu",...i,ref:p,tabindex:-1,class:["q-menu q-position-engine scroll"+re.value,i.class],style:[i.style,P.value],...se.value},te(t.default)):null)}return me(R),Object.assign(v,{focus:N,updatePosition:l}),le}}),jt=Object.keys(ze);function It(e){return jt.reduce((t,n)=>{const i=e[n];return i!==void 0&&(t[n]=i),t},{})}const Mt=ee({name:"QBtnDropdown",props:{...ze,...Fe,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:i}=ne(),a=q(e.modelValue),r=q(null),u=St(),f=y(()=>{const h={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true","aria-controls":u.value,"aria-label":e.toggleAriaLabel||i.$q.lang.label[a.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(h["aria-disabled"]="true"),h}),w=y(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),v=y(()=>et(e)),s=y(()=>It(e));O(()=>e.modelValue,h=>{r.value!==null&&r.value[h?"show":"hide"]()}),O(()=>e.split,P);function p(h){a.value=!0,n("beforeShow",h)}function b(h){n("show",h),n("update:modelValue",!0)}function d(h){a.value=!1,n("beforeHide",h)}function k(h){n("hide",h),n("update:modelValue",!1)}function x(h){n("click",h)}function E(h){He(h),P(),n("click",h)}function B(h){r.value!==null&&r.value.toggle(h)}function F(h){r.value!==null&&r.value.show(h)}function P(h){r.value!==null&&r.value.hide(h)}return Object.assign(i,{show:F,hide:P,toggle:B}),pe(()=>{e.modelValue===!0&&F()}),()=>{const h=[m(Le,{class:w.value,name:e.dropdownIcon||i.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&h.push(m(Dt,{ref:r,id:u.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:p,onShow:b,onBeforeHide:d,onHide:k},t.default)),e.split===!1?m(z,{class:"q-btn-dropdown q-btn-dropdown--simple",...s.value,...f.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:x},{default:()=>te(t.label,[]).concat(h),loading:t.loading}):m(Ht,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...v.value,glossy:e.glossy,stretch:e.stretch},()=>[m(z,{class:"q-btn-dropdown--current",...s.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:E},{default:t.label,loading:t.loading}),m(z,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...f.value,...v.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>h)])}}});function Me(e,t,n){t.handler?t.handler(e,n,n.caret):n.runCmd(t.cmd,t.param)}function ve(e){return m("div",{class:"q-editor__toolbar-group"},e)}function Qe(e,t,n,i=!1){const a=i||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),r=[];if(t.tip&&e.$q.platform.is.desktop){const u=t.key?m("div",[m("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;r.push(m(xt,{delay:1e3},()=>[m("div",{innerHTML:t.tip}),u]))}return m(z,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:a?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:a&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(u){n&&n(),Me(u,t,e)}},()=>r)}function Qt(e,t){const n=t.list==="only-icons";let i=t.label,a=t.icon!==null?t.icon:void 0,r,u;function f(){v.component.proxy.hide()}if(n)u=t.options.map(s=>{const p=s.type===void 0?e.caret.is(s.cmd,s.param):!1;return p&&(i=s.tip,a=s.icon!==null?s.icon:void 0),Qe(e,s,f,p)}),r=e.toolbarBackgroundClass.value,u=[ve(u)];else{const s=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,p=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,b=t.list==="no-icons";u=t.options.map(d=>{const k=d.disable?d.disable(e):!1,x=d.type===void 0?e.caret.is(d.cmd,d.param):!1;x&&(i=d.tip,a=d.icon!==null?d.icon:void 0);const E=d.htmlTip;return m(Et,{active:x,activeClass:s,clickable:!0,disable:k,dense:!0,onClick(B){f(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),Me(B,d,e)}},()=>[b===!0?null:m(Te,{class:x?s:p,side:!0},()=>m(Le,{name:d.icon!==null?d.icon:void 0})),m(Te,E?()=>m("div",{class:"text-no-wrap",innerHTML:d.htmlTip}):d.tip?()=>m("div",{class:"text-no-wrap"},d.tip):void 0)])}),r=[e.toolbarBackgroundClass.value,p]}const w=t.highlight&&i!==t.label,v=m(Mt,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:w?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:w&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:i,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:a,contentClass:r,onShow:s=>e.emit("dropdownShow",s),onHide:s=>e.emit("dropdownHide",s),onBeforeShow:s=>e.emit("dropdownBeforeShow",s),onBeforeHide:s=>e.emit("dropdownBeforeHide",s)},()=>u);return v}function Ut(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(n=>n.cmd==="viewsource")).map(t=>ve(t.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?te(e.slots[n.slot]):n.type==="dropdown"?Qt(e,n):Qe(e,n))))}function Kt(e,t,n,i={}){const a=Object.keys(i);if(a.length===0)return{};const r={default_font:{cmd:"fontName",param:e,icon:n,tip:t}};return a.forEach(u=>{const f=i[u];r[u]={cmd:"fontName",param:f,icon:n,tip:f,htmlTip:`<font face="${f}">${f}</font>`}}),r}function Wt(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const i=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[m("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),m("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:a=>{He(a),n=a.target.value},onKeydown:a=>{if($e(a)!==!0)switch(a.keyCode){case 13:return ye(a),i();case 27:ye(a),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ve([m(z,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),m(z,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:i})])]}}let M=0;const Gt={fullscreen:Boolean,noRouteFullscreenExit:Boolean},Xt=["update:fullscreen","fullscreen"];function Jt(){const e=ne(),{props:t,emit:n,proxy:i}=e;let a,r,u;const f=q(!1);tt(e)===!0&&O(()=>i.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&s()}),O(()=>t.fullscreen,p=>{f.value!==p&&w()}),O(f,p=>{n("update:fullscreen",p),n("fullscreen",p)});function w(){f.value===!0?s():v()}function v(){f.value!==!0&&(f.value=!0,u=i.$el.parentNode,u.replaceChild(r,i.$el),document.body.appendChild(i.$el),M++,M===1&&document.body.classList.add("q-body--fullscreen-mixin"),a={handler:s},be.add(a))}function s(){f.value===!0&&(a!==void 0&&(be.remove(a),a=void 0),u.replaceChild(i.$el,r),f.value=!1,M=Math.max(0,M-1),M===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),i.$el.scrollIntoView!==void 0&&setTimeout(()=>{i.$el.scrollIntoView()})))}return nt(()=>{r=document.createElement("span")}),pe(()=>{t.fullscreen===!0&&v()}),me(s),Object.assign(i,{toggleFullscreen:w,setFullscreen:v,exitFullscreen:s}),{inFullscreen:f,toggleFullscreen:w}}const Zt=Object.prototype.toString,ge=Object.prototype.hasOwnProperty,Yt=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function Pe(e){if(e!==Object(e)||Yt.has(Zt.call(e))===!0||e.constructor&&ge.call(e,"constructor")===!1&&ge.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||ge.call(e,t)}function Ue(){let e,t,n,i,a,r,u=arguments[0]||{},f=1,w=!1;const v=arguments.length;for(typeof u=="boolean"&&(w=u,u=arguments[1]||{},f=2),Object(u)!==u&&typeof u!="function"&&(u={}),v===f&&(u=this,f--);f<v;f++)if((e=arguments[f])!==null)for(t in e)n=u[t],i=e[t],u!==i&&(w===!0&&i&&((a=Array.isArray(i))||Pe(i)===!0)?(a===!0?r=Array.isArray(n)===!0?n:[]:r=Pe(n)===!0?n:{},u[t]=Ue(w,r,i)):i!==void 0&&(u[t]=i));return u}const Vt=ee({name:"QEditor",props:{...Re,...Gt,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Xt,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:n}){const{proxy:i}=ne(),{$q:a}=i,r=_e(e,a),{inFullscreen:u,toggleFullscreen:f}=Jt(),w=We(),v=q(null),s=q(null),p=q(null),b=q(!1),d=y(()=>!e.readonly&&!e.disable);let k,x,E=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),k=window.getComputedStyle(document.body).fontFamily;const B=y(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),F=y(()=>({type:"a",flat:e.toolbarOutline!==!0&&e.toolbarPush!==!0,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!d.value,size:"sm"})),P=y(()=>{const o=a.lang.editor,l=a.iconSet.editor;return{bold:{cmd:"bold",icon:l.bold,tip:o.bold,key:66},italic:{cmd:"italic",icon:l.italic,tip:o.italic,key:73},strike:{cmd:"strikeThrough",icon:l.strikethrough,tip:o.strikethrough,key:83},underline:{cmd:"underline",icon:l.underline,tip:o.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:l.unorderedList,tip:o.unorderedList},ordered:{cmd:"insertOrderedList",icon:l.orderedList,tip:o.orderedList},subscript:{cmd:"subscript",icon:l.subscript,tip:o.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:l.superscript,tip:o.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:g=>g.caret&&!g.caret.can("link"),icon:l.hyperlink,tip:o.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:l.toggleFullscreen,tip:o.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:l.viewSource,tip:o.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:l.quote,tip:o.quote,key:81},left:{cmd:"justifyLeft",icon:l.left,tip:o.left},center:{cmd:"justifyCenter",icon:l.center,tip:o.center},right:{cmd:"justifyRight",icon:l.right,tip:o.right},justify:{cmd:"justifyFull",icon:l.justify,tip:o.justify},print:{type:"no-state",cmd:"print",icon:l.print,tip:o.print,key:80},outdent:{type:"no-state",disable:g=>g.caret&&!g.caret.can("outdent"),cmd:"outdent",icon:l.outdent,tip:o.outdent},indent:{type:"no-state",disable:g=>g.caret&&!g.caret.can("indent"),cmd:"indent",icon:l.indent,tip:o.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:l.removeFormat,tip:o.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:l.hr,tip:o.hr},undo:{type:"no-state",cmd:"undo",icon:l.undo,tip:o.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:l.redo,tip:o.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:l.heading1||l.heading,tip:o.heading1,htmlTip:`<h1 class="q-ma-none">${o.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:l.heading2||l.heading,tip:o.heading2,htmlTip:`<h2 class="q-ma-none">${o.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:l.heading3||l.heading,tip:o.heading3,htmlTip:`<h3 class="q-ma-none">${o.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:l.heading4||l.heading,tip:o.heading4,htmlTip:`<h4 class="q-ma-none">${o.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:l.heading5||l.heading,tip:o.heading5,htmlTip:`<h5 class="q-ma-none">${o.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:l.heading6||l.heading,tip:o.heading6,htmlTip:`<h6 class="q-ma-none">${o.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:l.heading,tip:o.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:l.code,htmlTip:`<code>${o.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:l.size1||l.size,tip:o.size1,htmlTip:`<font size="1">${o.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:l.size2||l.size,tip:o.size2,htmlTip:`<font size="2">${o.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:l.size3||l.size,tip:o.size3,htmlTip:`<font size="3">${o.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:l.size4||l.size,tip:o.size4,htmlTip:`<font size="4">${o.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:l.size5||l.size,tip:o.size5,htmlTip:`<font size="5">${o.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:l.size6||l.size,tip:o.size6,htmlTip:`<font size="6">${o.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:l.size7||l.size,tip:o.size7,htmlTip:`<font size="7">${o.size7}</font>`}}}),h=y(()=>{const o=e.definitions||{},l=e.definitions||e.fonts?Ue(!0,{},P.value,o,Kt(k,a.lang.editor.defaultFont,a.iconSet.editor.font,e.fonts)):P.value;return e.toolbar.map(g=>g.map(c=>{if(c.options)return{type:"dropdown",icon:c.icon,label:c.label,size:"sm",dense:!0,fixedLabel:c.fixedLabel,fixedIcon:c.fixedIcon,highlight:c.highlight,list:c.list,options:c.options.map(ue=>l[ue])};const S=l[c];return S?S.type==="no-state"||o[c]&&(S.cmd===void 0||P.value[S.cmd]&&P.value[S.cmd].type==="no-state")?S:Object.assign({type:"toggle"},S):{type:"slot",slot:c}}))}),C={$q:a,props:e,slots:t,emit:n,inFullscreen:u,toggleFullscreen:f,runCmd:R,isViewingSource:b,editLinkUrl:p,toolbarBackgroundClass:B,buttonProps:F,contentRef:s,buttons:h,setContent:D};O(()=>e.modelValue,o=>{E!==o&&(E=o,D(o,!0))}),O(p,o=>{n(`link${o?"Show":"Hide"}`)});const oe=y(()=>e.toolbar&&e.toolbar.length!==0),L=y(()=>{const o={},l=g=>{g.key&&(o[g.key]={cmd:g.cmd,param:g.param})};return h.value.forEach(g=>{g.forEach(c=>{c.options?c.options.forEach(l):l(c)})}),o}),ie=y(()=>u.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),Q=y(()=>`q-editor q-editor--${b.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(u.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(r.value===!0?" q-editor--dark q-dark":"")),U=y(()=>[e.contentClass,"q-editor__content",{col:u.value,"overflow-auto":u.value||e.maxHeight}]),K=y(()=>e.disable===!0?{"aria-disabled":"true"}:{});function le(){if(s.value!==null){const o=`inner${b.value===!0?"Text":"HTML"}`,l=s.value[o];l!==e.modelValue&&(E=l,n("update:modelValue",l))}}function A(o){if(n("keydown",o),o.ctrlKey!==!0||$e(o)===!0){T();return}const l=o.keyCode,g=L.value[l];if(g!==void 0){const{cmd:c,param:S}=g;Oe(o),R(c,S,!1)}}function W(o){T(),n("click",o)}function ae(o){if(s.value!==null){const{scrollTop:l,scrollHeight:g}=s.value;x=g-l}C.caret.save(),n("blur",o)}function re(o){ot(()=>{s.value!==null&&x!==void 0&&(s.value.scrollTop=s.value.scrollHeight-x)}),n("focus",o)}function se(o){const l=v.value;if(l!==null&&l.contains(o.target)===!0&&(o.relatedTarget===null||l.contains(o.relatedTarget)!==!0)){const g=`inner${b.value===!0?"Text":"HTML"}`;C.caret.restorePosition(s.value[g].length),T()}}function G(o){const l=v.value;l!==null&&l.contains(o.target)===!0&&(o.relatedTarget===null||l.contains(o.relatedTarget)!==!0)&&(C.caret.savePosition(),T())}function N(){x=void 0}function X(o){C.caret.save()}function D(o,l){if(s.value!==null){l===!0&&C.caret.savePosition();const g=`inner${b.value===!0?"Text":"HTML"}`;s.value[g]=o,l===!0&&(C.caret.restorePosition(s.value[g].length),T())}}function R(o,l,g=!0){j(),C.caret.restore(),C.caret.apply(o,l,()=>{j(),C.caret.save(),g&&T()})}function T(){setTimeout(()=>{p.value=null,i.$forceUpdate()},1)}function j(){Ne(()=>{s.value!==null&&s.value.focus({preventScroll:!0})})}function J(){return s.value}return pe(()=>{C.caret=i.caret=new Lt(s.value,C),D(e.modelValue),T(),document.addEventListener("selectionchange",X)}),me(()=>{document.removeEventListener("selectionchange",X)}),Object.assign(i,{runCmd:R,refreshToolbar:T,focus:j,getContentEl:J}),()=>{let o;if(oe.value){const l=[m("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+B.value},Ut(C))];p.value!==null&&l.push(m("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+B.value},Wt(C))),o=m("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},l)}return m("div",{ref:v,class:Q.value,style:{height:u.value===!0?"100%":null},...K.value,onFocusin:se,onFocusout:G},[o,m("div",{ref:s,style:ie.value,class:U.value,contenteditable:d.value,placeholder:e.placeholder,...w.listeners.value,onInput:le,onKeydown:A,onClick:W,onBlur:ae,onFocus:re,onMousedown:N,onTouchstartPassive:N})])}}}),en={class:"q-gutted-md q-card--bordered q-layout-padding"},tn={class:"q-mt-md"},nn={key:0,class:"text-negative q-mt-xs"},on={class:"q-mt-lg"},hn=it({__name:"ExerciseForm",setup(e){const t=lt(),n=ct(),i=q(!1);let a=V.create(V.get(Number.parseInt(t.params.id)),!1);const r=q({...a}),u=q("Edit exercise");a||(a=V.create(void 0,!1),u.value="Create exercise");function f(b){return b.replace(/<[^>]*>?/gm,"")}function w(){return!!r.value.name&&!!f(r.value.description)}function v(){a.delete(),Y.create("Exercise deleted"),n.go(-1)}function s(){if(i.value=!0,!w()){Y.create("Form cannot be validated. please double check all required fields");return}r.value.description=f(r.value.description),V.create(r.value),Y.create("Saved successfully"),Ot.value+=1,n.go(-1)}r.value.description||(r.value.description="");function p(b){const d=document.createElement("textarea");return d.innerHTML=b,d.value}return(b,d)=>(de(),we(ut,null,[I("h1",null,at(u.value),1),I("form",en,[Z(Ge,{modelValue:r.value.name,"onUpdate:modelValue":d[0]||(d[0]=k=>r.value.name=k),label:"Name","stack-label":"",required:"",rules:[k=>!!k||"Name is required"],error:i.value&&!r.value?.name},null,8,["modelValue","rules","error"]),I("div",tn,[d[3]||(d[3]=I("label",{class:"text-caption"},"Description *",-1)),Z(Vt,{"model-value":p(r.value.description),"onUpdate:modelValue":d[1]||(d[1]=k=>r.value.description=k),class:rt(["q-mt-xs",{"q-editor-error":i.value&&!r.value?.description}]),style:{"white-space":"pre-wrap"}},null,8,["model-value","class"]),i.value&&!r.value?.description?(de(),we("div",nn," Description is required ")):ke("",!0)]),I("div",on,[Z(z,{onClick:s,color:"accent"},{default:ce(()=>d[4]||(d[4]=[fe("Save")])),_:1}),Z(z,{onClick:d[2]||(d[2]=k=>(Ce(n).go(-1),Ce(Y).create("No changes were made."))),class:"q-ml-sm"},{default:ce(()=>d[5]||(d[5]=[fe("Cancel")])),_:1}),u.value=="Edit exercise"?(de(),st(z,{key:0,onClick:v},{default:ce(()=>d[6]||(d[6]=[fe("DELETE")])),_:1})):ke("",!0)])])],64))}});export{hn as default};
